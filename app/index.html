<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/cyborg/bulmaswatch.min.css" />
        <link rel="stylesheet" href="https://cdn.quilljs.com/1.3.6/quill.snow.css" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/selectnsearch.css" />
        <link rel="stylesheet" href="css/quill.css" />
        <title>Casterlabs Caffeinated</title>
        <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
        <script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule="" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>
        <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
        <script src="https://casterlabs.github.io/CurrencyConvert.js/currencyconvert.js"></script>
        <!-- https://tobiasahlin.com/spinkit/ -->
        <style>
            .spinner {
                margin: 100px auto 0;
                width: 70px;
                text-align: center;
            }

            .spinner>div {
                width: 18px;
                height: 18px;
                background-color: #333;

                border-radius: 100%;
                display: inline-block;
                -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;
                animation: sk-bouncedelay 1.4s infinite ease-in-out both;
            }

            .spinner .bounce1 {
                -webkit-animation-delay: -0.32s;
                animation-delay: -0.32s;
            }

            .spinner .bounce2 {
                -webkit-animation-delay: -0.16s;
                animation-delay: -0.16s;
            }

            @-webkit-keyframes sk-bouncedelay {

                0%,
                80%,
                100% {
                    -webkit-transform: scale(0)
                }

                40% {
                    -webkit-transform: scale(1.0)
                }
            }

            @keyframes sk-bouncedelay {

                0%,
                80%,
                100% {
                    -webkit-transform: scale(0);
                    transform: scale(0);
                }

                40% {
                    -webkit-transform: scale(1.0);
                    transform: scale(1.0);
                }
            }
        </style>
    </head>

    <body>
        <div id="splash" style="opacity: 1;">
            <img src="media/app_icon.png" class="app-icon" />
            <img src="media/caffeinated.png" class="caffeinated-logo" />
            <span class="splash-message" style="opacity: 0;"></span>
        </div>
        <div class="title-bar">
            <div class="title-bar-title"><img class="version-hover" src="media/app_icon.png" />Caffeinated</div>
            <!-- <span class="currentpage" style="opacity: 0;"></span> -->
            <a class="close" title="Close">
                <ion-icon name="close-outline"></ion-icon>
            </a>
            <a class="minmax" title="Maximize">
                <ion-icon name="albums-outline"></ion-icon>
            </a>
            <a class="minimize" title="Minimize">
                <ion-icon name="remove-outline"></ion-icon>
            </a>
        </div>
        <div id="content">
            <div class="menu">
                <nav class='animated bounceInDown'>
                    <ul class="menu-list" id="page-menu">
                        <!-- <li id="menu-overlays">
                            <a class="menu-button" onclick="navigate('overlays');" title="Caffeinated Overlays"> -->
                        <!-- <ion-icon name="copy"></ion-icon> -->
                        <!-- <div class="menu-button-title">Overlays</div>
                            </a>
                        </li> -->
                        <li id="menu-overlays">
                            <a class="menu-button">
                                <div class="menu-button-title">
                                    Widgets <ion-icon name="chevron-down-outline" class="sub-menu-arrow"></ion-icon>
                                </div>
                            </a>
                            <div class="dropdown-container" id="widgets">
                                <!-- <div class="dropdown-item">
                                    <div class="dropdown-title">
                                        <a>Donation</a>
                                    </div>
                                   
                                    <div class="dropdown-icon">
                                        <a><ion-icon name="eye-outline" role="img" class="md hydrated" aria-label="eye outline"></ion-icon></a>
                                        <a><ion-icon name="volume-high-outline" role="img" class="md hydrated" aria-label="volume high outline"></ion-icon></a>
                                    </div>
                                </div> -->

                                <!-- For when widgets are dynamically added -->
                                <!-- <div class="dropdown-item add-widget">
                                    <a href="#"><ion-icon name="add-circle-outline"></ion-icon> <span style="position: absolute; top: 9px; left: 40px;">Add widget</span></a>
                                </div> -->
                            </div>
                        </li>
                    </ul>
                </nav>

            </div>
            <div id="user-bar">
                <a onclick="navigate('settings');">
                    <img class="user-icon" src="media/icon.png" />
                    <div class="user-username">
                        <ion-icon name="settings-outline"></ion-icon>
                    </div>
                </a>
                <a onclick="openLink(CAFFEINATED.userdata.streamer.link)">
                    <img class="user-platform" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                </a>
                <p class="user-followers">
                    <span id="followers"></span>
                </p>
                <!-- <a class="user-settings" title="Settings" onclick="navigate('settings');">
                    <ion-icon name="settings-outline"></ion-icon>
                </a> -->
            </div>
            <div class="pages">
                <div class="content page widget-settings-page hide" page="settings" id="settings"></div>
            </div>
            <div id="login" class="center-text hide">
                <br />
                <br />
                <br />
                <br />
                <div id="login-buttons">
                    <span class="subtitle is-3">
                        Log in to Casterlabs
                    </span>
                    <!-- <sub><i>ITALICS</i> <b>BOLD <i>VARIETY</i></b></sub> New merch? -->
                    <br />
                    <br />
                    <br />
                    <a class="button" onclick="loginScreen('TWITCH');" style="overflow: hidden; background-color: #7d2bf9;">
                        <img src="https://assets.casterlabs.co/twitch/logo.png" style="height: 1.5em; position: absolute; left: 12.5px; top: 7.5px;" />
                        <span style="padding-left: 1.75em; z-index: 2;">Login with Twitch</span>
                    </a>
                    <a class="button" onclick="loginScreen('CAFFEINE');" style="overflow: hidden; background-color: #0000FF;">
                        <img src="https://assets.casterlabs.co/caffeine/logo.png" style="height: 2.5em; position: absolute; left: 5px;" />
                        <span style="padding-left: 1.75em; z-index: 2;">Login with Caffeine</span>
                    </a>
                </div>
                <div id="login-waiting" class="hide">
                    <div class="spinner">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                    <br />
                    <a onclick="loginScreen('NONE');">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                </div>
                <div id="login-caffeine" class="hide">
                    <br />
                    <br />
                    <input id="login-caffeine-username" type="input" placeholder="Username" class="input login-element" />
                    <br />
                    <input id="login-caffeine-password" type="password" placeholder="Password" class="input login-element" />
                    <br />
                    <input type="submit" value="Signin" class="button login-element" onclick="loginCaffeine()" />
                    <br />
                    <a onclick="loginScreen('NONE');">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                </div>
                <div id="mfa-caffeine" class="hide">
                    <br />
                    <br />
                    <input id="login-caffeine-mfa" type="input" placeholder="2 Factor Code" class="input login-element" />
                    <br />
                    <input type="submit" value="Signin" class="button login-element" onclick="loginCaffeine()" />
                    <br />
                    <a onclick="loginScreen('NONE');">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                </div>
            </div>
        </div>
    </body>

    <footer>
        <script src="js/util.js"></script>
        <script src="js/kinoko.js"></script>
        <script src="js/lang.js"></script>
        <script src="js/currencies.js"></script>
        <script src="js/selectnsearch.js"></script>
        <script src="js/forms.js"></script>
        <script src="js/fontselect.js"></script>
        <script src="js/quillutil.js"></script>
        <script src="js/koi.js"></script>
        <script src="js/navigate.js"></script>
        <script src="js/modules.js"></script>
        <script src="js/repomanager.js"></script>
        <script src="js/caffeinated.js"></script>
        <script>

            window.addEventListener("beforeunload", () => {
                const current = electron.getCurrentWindow();

                BrowserWindow.getAllWindows().forEach((window) => {
                    if (window !== current) {
                        window.close();
                    }
                });
            });

            navigate("settings");
            CAFFEINATED.init();

            /*
            const contextMenu = require('electron-context-menu');
            contextMenu({
                prepend: (defaultActions, params, browserWindow) => [
                    {
                        label: 'Test',
                        click: () => {
                            console.log(params);
                            console.log(defaultActions);
                        }
                    }
                ]
            });
            */
        </script>
        <div id="scripts"></div>
    </footer>

</html>
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/cyborg/bulmaswatch.min.css" class="bulma-style-sheet" />
        <link rel="stylesheet" href="https://cdn.quilljs.com/1.3.6/quill.snow.css" class="quill-snow-style-sheet" />

        <link rel="stylesheet" href="css/style.css" class="caffeinated-style-sheet" />
        <link rel="stylesheet" href="css/selectnsearch.css" class="selectnsearch-style-sheet" />
        <link rel="stylesheet" href="css/quill.css" class="quill-style-sheet" />

        <title>Casterlabs Caffeinated</title>
        <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
        <script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule="" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>
        <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
        <script src="https://casterlabs.github.io/CurrencyConvert.js/currencyconvert.js"></script>
        <!-- https://tobiasahlin.com/spinkit/ -->
        <style>
            .spinner {
                margin: 100px auto 0;
                width: 70px;
                text-align: center;
            }

            .spinner>div {
                width: 18px;
                height: 18px;
                background-color: #333;

                border-radius: 100%;
                display: inline-block;
                -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;
                animation: sk-bouncedelay 1.4s infinite ease-in-out both;
            }

            .spinner .bounce1 {
                -webkit-animation-delay: -0.32s;
                animation-delay: -0.32s;
            }

            .spinner .bounce2 {
                -webkit-animation-delay: -0.16s;
                animation-delay: -0.16s;
            }

            @-webkit-keyframes sk-bouncedelay {

                0%,
                80%,
                100% {
                    -webkit-transform: scale(0)
                }

                40% {
                    -webkit-transform: scale(1.0)
                }
            }

            @keyframes sk-bouncedelay {

                0%,
                80%,
                100% {
                    -webkit-transform: scale(0);
                    transform: scale(0);
                }

                40% {
                    -webkit-transform: scale(1.0);
                    transform: scale(1.0);
                }
            }
        </style>
    </head>

    <body>
        <canvas id="doot-rain" style="opacity: 0;"></canvas>
        <div class="title-bar">
            <div class="title-bar-title">
                <img class="version-hover" src="media/app_icon.png" onclick="UI.doot();" />
                Caffeinated
            </div>
            <!-- <span class="currentpage" style="opacity: 0;"></span> -->
            <a class="close" title="Close">
                <ion-icon name="close-outline" style="--ionicon-stroke-width: 46px !important;"></ion-icon>
            </a>
            <a class=" minmax" title="Maximize">
                <ion-icon name="browsers-outline"></ion-icon>
            </a>
            <a class="minimize" title="Minimize">
                <ion-icon name="remove" style="--ionicon-stroke-width: 62px !important;"></ion-icon>
            </a>
        </div>
        <div id="content" class="hide" style="opacity: 0;">
            <div id="banners">
            </div>
            <div id="changelog" class="hide">
                <a id="changelog-close">
                    <ion-icon name="close-circle-outline"></ion-icon>
                </a>
            </div>
            <div class="main-content">
                <div class="menu">
                    <nav>
                        <ul class="menu-list" id="page-menu">
                            <li id="menu-overlays">
                                <a class="menu-button">
                                    <div class="menu-button-title">
                                        <span class="translatable" lang="caffeinated.internal.widgets">Widgets</span>
                                        <ion-icon name="chevron-down-outline" class="sub-menu-arrow"></ion-icon>
                                    </div>
                                </a>
                                <div class="dropdown-container" id="widgets">
                                    <!-- For when dynamic widgets are a thing -->
                                    <div class="manage-widgets-container dropdown-item hide">
                                        <div class="dropdown-title">
                                            <a id="manage-widgets-button" onclick="navigate('manage-widgets');" class="translatable" lang="caffeinated.internal.managewidgets" title="Manage Widgets">Manage Widgets</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                    <div id="user-bar">
                        <a onclick="navigate('settings');">
                            <img class="user-icon" src="media/icon.png" />
                            <div class="user-username">
                                <ion-icon name="settings-outline"></ion-icon>
                                <span class="user-username-text"></span>
                            </div>
                        </a>
                        <a onclick="openLink(CAFFEINATED.userdata.streamer.link)">
                            <img class="user-platform" onclick="UI.slap();" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                        </a>
                        <p class="user-meta">
                            <span id="user-meta-text"></span>
                        </p>
                    </div>
                </div>
                <div class="pages">
                    <div class="content page widget-settings-page hide" page="settings" id="settings"></div>
                    <div class="content page hide" page="manage-widgets" id="manage-widgets">
                        <div class="is-unselectable">
                            <label class="settings-label">
                                Manage Widgets
                            </label>
                            <br />
                        </div>
                        <div style="margin: auto;">
                            <select class="select is-inline" id="create-type" style="height: 3em !important;"></select>
                            <input class="input is-inline" id="create-name" type="text" placeholder="My new widget name">
                            <button class="button is-inline" id="submit-create">Create</button>
                        </div>
                        <div class="is-unselectable">
                            <br />
                            <br />
                        </div>
                        <div id="module-deletion">
                        </div>
                    </div>
                </div>
            </div>
            <div id="login" class="center-text hide">
                <br />
                <br />
                <div id="login-buttons">
                    <div id="login-streamer">
                    </div>
                    <div id="login-contents">
                        <br />
                        <br />
                        <span class="subtitle is-3">
                            Welcome to Casterlabs
                        </span>
                        <br />
                        <!-- <sub><i>ITALICS</i> <b>BOLD</b> <i style="text-decoration: underline;">VARIETY</i></sub> -->
                        <br />
                        <div class="button-container">
                        </div>
                        <div class="service-disclaimer">
                            <span>
                                By logging in, you agree to our <a onclick="openLink('https:\/\/casterlabs.co/terms-of-service');">Terms of Service</a> and acknowledge that our <a onclick="openLink('https:\/\/casterlabs.co/privacy-policy')">Privacy Policy</a> applies to you.
                            </span>
                        </div>
                    </div>
                </div>
                <div id="login-waiting" class="hide">
                    <div class="spinner">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                    <br />
                    <a onclick="UI.backCallback();">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                </div>
                <div id="login-success" class="hide">
                    <div class="spinner">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                </div>
                <div id="login-caffeine" class="hide">
                    <span class="subtitle is-3">
                        Log in with Caffeine
                    </span>
                    <br />
                    <br />
                    <input id="login-caffeine-username" type="input" placeholder="Username" class="input login-element" />
                    <br />
                    <input id="login-caffeine-password" type="password" placeholder="Password" class="input login-element" />
                    <br />
                    <input type="submit" value="Signin" class="button login-element" onclick="UI.loginCaffeine()" />
                    <br />
                    <a onclick="UI.backCallback();">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                    <div class="service-disclaimer">
                        <span>
                            By logging in, you agree to our <a onclick="openLink('https:\/\/casterlabs.co/terms-of-service')">Terms of Service</a> and acknowledge that our <a onclick="openLink('https:\/\/casterlabs.co/privacy-policy')">Privacy Policy</a> applies to you.
                        </span>
                    </div>
                </div>
                <div id="login-brime" class="hide">
                    <span class="subtitle is-3">
                        Log in with Brime
                    </span>
                    <br />
                    <br />
                    <input id="login-brime-email" type="input" placeholder="Email" class="input login-element" />
                    <br />
                    <input id="login-brime-password" type="password" placeholder="Password" class="input login-element" />
                    <br />
                    <input type="submit" value="Signin" class="button login-element" onclick="UI.loginBrime()" />
                    <br />
                    <a onclick="UI.backCallback();">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                    <div class="service-disclaimer">
                        <span>
                            By logging in, you agree to our <a onclick="openLink('https:\/\/casterlabs.co/terms-of-service')">Terms of Service</a> and acknowledge that our <a onclick="openLink('https:\/\/casterlabs.co/privacy-policy')">Privacy Policy</a> applies to you.
                        </span>
                    </div>
                </div>
                <div id="mfa-caffeine" class="hide">
                    <span class="subtitle is-3">
                        Caffeine Two-Factor
                    </span>
                    <br />
                    <br />
                    <input style="z-index: -9999; opacity: 0;" type="input" class="input" /> <!-- Spacer -->
                    <br />
                    <input id="login-caffeine-mfa" type="input" placeholder="2 Factor Code" class="input login-element" />
                    <br />
                    <input type="submit" value="Signin" class="button login-element" onclick="UI.loginCaffeine()" />
                    <br />
                    <a onclick="UI.loginScreen('CAFFEINE');">
                        <sup>
                            Want to go back?
                        </sup>
                    </a>
                    <div class="service-disclaimer">
                        <span>
                            By logging in, you agree to our <a onclick="openLink('https:\/\/casterlabs.co/terms-of-service')">Terms of Service</a> and acknowledge that our <a onclick="openLink('https:\/\/casterlabs.co/privacy-policy')">Privacy Policy</a> applies to you.
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div id="splash" style="opacity: 1;">
            <div class="inner-splash">
                <img src="media/app_icon.png" class="app-icon" />
                <img src="media/caffeinated.png" class="caffeinated-logo" />
                <span class="splash-message" style="opacity: 0;"></span>
            </div>
        </div>
    </body>

    <footer>
        <script src="js/analytics.js"></script>
        <script src="js/lang.js"></script>

        <script src="lang/en.js"></script>
        <script src="lang/fr.js"></script>
        <script src="lang/es.js"></script>
        <script src="lang/nl.js"></script>

        <script src="js/util.js"></script>
        <script src="js/invokable.js"></script>
        <script src="js/kinoko.js"></script>
        <script src="js/currencies.js"></script>
        <script src="js/selectnsearch.js"></script>
        <script src="js/forms.js"></script>
        <script src="js/fontselect.js"></script>
        <script src="js/quillutil.js"></script>
        <script src="js/koi.js"></script>
        <script src="js/navigate.js"></script>
        <script src="js/modules.js"></script>
        <script src="js/repomanager.js"></script>
        <script src="js/caffeinated.js"></script>
        <script type="module">
            import FormElements from "./js/form-elements.mjs";

            window.FormElements = FormElements;

            import { showRandomStreamer } from "https://assets.casterlabs.co/caffeinated/randomstreamer.mjs"

            const streamerElement = document.querySelector("#login-streamer");
            const contentsElement = document.querySelector("#login-contents");

            window.showAnotherRandomStreamer = () => {
                console.log("Showing a random streamer!");

                streamerElement.innerHTML = "";
                streamerElement.classList = "";

                const direction = showRandomStreamer(streamerElement, false, openLink, true);

                contentsElement.classList = `streamer-${direction}`;
            };

            window.addEventListener("beforeunload", () => {
                const current = electron.getCurrentWindow();

                BrowserWindow.getAllWindows().forEach((window) => {
                    if (window !== current) {
                        window.close();
                    }
                });
            });

            navigate("settings");
            CAFFEINATED.init();

            /*
            const contextMenu = require('electron-context-menu');
            contextMenu({
                prepend: (defaultActions, params, browserWindow) => [
                    {
                        label: 'Test',
                        click: () => {
                            console.log(params);
                            console.log(defaultActions);
                        }
                    }
                ]
            });
            */
        </script>
        <div id="scripts"></div>
    </footer>

</html>